# 2.1 JavaåŸç”Ÿæ§åˆ¶åè½¬

## é˜…å‰å£°æ˜

â€‹	ä¸ºäº†é¿å…æµªè´¹ä½ å®è´µçš„é˜…è¯»æ—¶é—´ï¼Œåœ¨å¼€å¤´ä½œå‡ºå¦‚ä¸‹å£°æ˜ã€‚

â€‹	æœ¬æ–‡ç« æ˜¯å­¦ä¹ äº†æå…´åè€å¸ˆçš„è¯¾ç¨‹ååšçš„ç¬”è®°ä¸æ€è€ƒï¼Œé¡¹ç›®å†…å®¹ä¸æ˜¯åŸåˆ›è€Œæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šã€‚

â€‹	æœ¬æ–‡ç« çš„å†…å®¹ä¸»è¦æ˜¯å…³äºä½¿ç”¨åŸç”ŸJavaå®ç°æ§åˆ¶åè½¬ï¼Œç›®çš„æ˜¯ä»åŸç”ŸJavaå¼€å‘è¿‡åº¦åˆ°Springæ¡†æ¶å¼€å‘çš„é¢„å¤‡ç†è§£ã€‚

â€‹	é¡¹ç›®ä½¿ç”¨ **JDK 1.8**ï¼Œæ„å»ºå·¥å…·ä¸º**Maven**ï¼Œéœ€è¦å¯¹**æ³›å‹**ï¼Œ**å·¥å‚è®¾è®¡æ¨¡å¼**ï¼Œ**åå°„**ï¼Œ**é…ç½®ç±»**ï¼Œ**å¤šçº¿ç¨‹**ç­‰çŸ¥è¯†æœ‰ä¸€å®šäº†è§£ã€‚

---

> é¡¹ç›®ï¼šorigin-java-example

â€‹	Springçš„å‡ºç°ä¸€å®šæœ‰å…¶èƒŒæ™¯åŸå› ï¼šåŸç”Ÿçš„Javaåœ¨è¯­è¨€çš„è®¾è®¡æ–¹é¢å‡ºç°äº†ä¸è¶³ã€‚

## 1.åŸç”ŸJavaç³»ç»Ÿçš„é—®é¢˜åˆ†æ

### 1.1 åŸå§‹å¼€å‘

â€‹	Javaé¢å‘å¯¹è±¡ç¼–ç¨‹æ˜¯ä»¥**ç±»å’Œå¯¹è±¡**ä¸ºåŸºç¡€å±•å¼€çš„ï¼Œè€ŒJavaçš„è¯­æ³•æ˜¯å›´ç»•ç€**ç±»ç»“æ„ä»£ç çš„å¯é‡ç”¨è®¾è®¡**å±•å¼€çš„ã€‚ä¸ºäº†æ›´å¥½åœ°è¡¨è¾¾å‡ºä¸åŒå±‚æ¬¡ï¼Œå¼€å‘ä¸­å¾€å¾€ä¼šå¼•å…¥æ¥å£ä¸æŠ½è±¡ç±»ï¼Œæ‰€ä»¥ä¸€ä¸ªå®Œæ•´çš„ç³»ç»Ÿå¼€å‘å¾€å¾€å¦‚ä¸‹å›¾

![image-20250122165957337](assets/image-20250122165957337.png)



â€‹	å¯¹äºæœ€åŸå§‹çš„Javaå¼€å‘çš„ç³»ç»Ÿï¼Œæ¯ä¸€ä¸ªç”¨æˆ·è¯·æ±‚éƒ½ä¼šå¯¹åº”ä¸€ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹éƒ½ä¼šå¯¼è‡´ä¸šåŠ¡å¤„ç†ç›¸å…³ç±»çš„å®ä¾‹åŒ–ï¼Œå¯¼è‡´å¯¹è±¡æ•°é‡æš´æ¶¨ï¼Œå½±å“ç¨‹åºçš„æ‰§è¡Œæ€§èƒ½ã€‚

![image-20250122170635185](assets/image-20250122170635185.png)

â€‹	é€ æˆè¿™ç§é—®é¢˜çš„åŸå› å°±æ˜¯ä»£ç ä¸­é¢‘ç¹åœ°ä½¿ç”¨å…³é”®å­—`new`æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚`new`è°ƒç”¨ç±»çš„æ„é€ æ–¹æ³•ï¼Œéšååœ¨å †æ ˆä¸­è¿›è¡Œå†…å­˜åˆ†é…ã€‚ä½†æ˜¯è¿™é€ æˆäº†ä¸¤ä¸ªé—®é¢˜ï¼š

1. æ­£æ˜¯ç”±äºå…¶é€»è¾‘çš„ç®€å•ï¼Œå¯¼è‡´äº†å¤§é‡åˆ›å»ºä¸šåŠ¡å®ç°ç±»å¯¹è±¡ã€‚
2. å®ä¾‹åŒ–æ¥å£æ—¶éœ€è¦ç»‘å®šå¯¹åº”çš„å®ç°å­ç±»ï¼Œè¿™æ ·çš„è¯æŠ½è±¡å‡ºæ¥å£çš„æ„ä¹‰å°±æ²¡æœ‰äº†ã€‚

> æŠ½è±¡å‡ºæ¥å£çš„æ„ä¹‰æ˜¯é¿å…è€¦åˆï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºæƒ³è®©ä»£ç çš„ä½¿ç”¨èŒƒå›´æ›´å¹¿ã€‚å¦‚æœç»‘å®šäº†æ¥å£çš„å®ç°å­ç±»ï¼Œæ„å‘³ç€è¿™æ®µä»£ç ä¸€å®šä¸è¿™ä¸ªå­ç±»è€¦åˆäº†ï¼Œè¿™æ®µä»£ç å°±å¤±å»äº†æ³›ç”¨æ€§ã€‚

![image-20250122171124264](assets/image-20250122171124264.png)

---

### 1.2 å·¥å‚è®¾è®¡æ¨¡å¼

â€‹	å¦‚æœæ¥å£åœ¨å®ä¾‹åŒ–æ—¶å¯ä»¥æ ¹æ®è¾“å…¥åŠ¨æ€è¿”å›å®ç°å­ç±»ï¼Œé‚£ä¹ˆä»£ç çš„æ³›ç”¨æ€§å°±ä¼šæå¤§çš„æé«˜ã€‚è¿™æ®µä»£ç ä»é’ˆå¯¹å®ç°å­ç±»çš„ç»´åº¦å˜æˆäº†é’ˆå¯¹æ¥å£çš„ç»´åº¦ã€‚

â€‹	äºæ˜¯åœ¨èªæ˜çš„å‰è¾ˆä»¬çš„æ€è€ƒä¸‹ï¼Œ**==å·¥å‚è®¾è®¡æ¨¡å¼==**è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚å®ƒæ ¹æ®å­—ç¬¦ä¸²æä¾›çš„ç±»ååŠ¨æ€æä¾›å®ç°å­ç±»ï¼Œæå¤§æé«˜äº†æ³›ç”¨æ€§ã€‚

![image-20250122172749061](assets/image-20250122172749061.png)

----

### 1.3 Beanæ¨¡å¼ç®¡ç†

â€‹	ç°åœ¨è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¯¹äºä¸åŒç”¨æˆ·æäº¤çš„VOæ•°æ®ç±»ï¼Œæ¯ä¸ªçº¿ç¨‹éƒ½è‚¯å®šè¦æœ‰è‡ªå·±çš„VOå¯¹è±¡å®ä¾‹ã€‚ä½†æ˜¯ï¼Œä¸šåŠ¡æ¥å£çš„å®ç°ç±»å®é™…ä¸Šå¹¶ä¸éœ€è¦æ¯ä¸ªçº¿ç¨‹éƒ½å®ä¾‹åŒ–ä¸€ä¸ªæ–°çš„å‡ºæ¥ï¼Œå› ä¸ºä¸ç®¡æ˜¯å“ªä¸ªç”¨æˆ·ï¼Œæ‰§è¡Œçš„é€»è¾‘éƒ½æ˜¯ç›¸åŒçš„ã€‚

â€‹	å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåœ¨ç³»ç»Ÿåœ¨å¯åŠ¨çš„åˆå§‹åŒ–é˜¶æ®µï¼ŒæŠŠç³»ç»Ÿä¸­æ‰€æœ‰ç”¨åˆ°çš„ä¸šåŠ¡å®ç°ç±»éƒ½å®ä¾‹åŒ–å‡ºæ¥ï¼Œå¹¶ä¸”ä½¿ç”¨ä¸€ä¸ª`Map`å°†å…¶è®°å½•ä¸‹æ¥ã€‚ä¹‹åå½“ç³»ç»Ÿä¸­ä»£ç éœ€è¦è°ƒç”¨æŸä¸ªç±»æ—¶ï¼Œç”±å·¥å‚å°†è¯¥å”¯ä¸€å®ä¾‹è¿”å›ç»™å®ƒã€‚è¿™æ ·ï¼Œå°±ä¿è¯äº†ä¸ä¼šå‡ºç°é¢‘ç¹åˆ›å»ºå‡ºæ–°çš„å®ä¾‹ï¼Œä¿è¯äº†æ€§èƒ½ã€‚

> éœ€è¦åŒºåˆ†å¼€VOæ•°æ®ç±»å’Œä¸šåŠ¡æ¥å£å®ç°ç±»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¤§å®¶éƒ½å»æ‰“å°ä¸ªäººä¿¡æ¯ï¼Œæ¯ä¸ªäººçš„ä¿¡æ¯è‚¯å®šéƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸ªäººä¿¡æ¯ç±»ä¸€å®šä¼šæœ‰å¾ˆå¤šä¸ªå¯¹è±¡ï¼Œä½†æ˜¯æ‰“å°æœºåªéœ€è¦ä¸€å°ä¸å°±å¤Ÿäº†å—ï¼Œæ‰€ä»¥æ‰“å°æœºç±»å®Œå…¨å¯ä»¥åªå®ä¾‹åŒ–ä¸€æ¬¡ã€‚

![image-20250122173740220](assets/image-20250122173740220.png)





## 2.åŸç”ŸJavaç®€å•æ¡ˆä¾‹

â€‹	åˆ›å»ºé¡¹ç›®ï¼ˆæˆ–æ¨¡å—ï¼‰: *origin-java-example*

```
origin-java-example
â”œâ”€â”€ pom.xml
â””â”€â”€ src
    â”œâ”€â”€ main
    â”‚Â Â  â”œâ”€â”€ java
    â”‚Â Â  â”‚Â Â  â””â”€â”€ i
    â”‚Â Â  â”‚Â Â      â””â”€â”€ love
    â”‚Â Â  â”‚Â Â          â””â”€â”€ wsq
    â”‚Â Â  â”‚Â Â              â”œâ”€â”€ Main.java
    â”‚Â Â  â”‚Â Â              â”œâ”€â”€ factory
    â”‚Â Â  â”‚Â Â              â”‚Â Â  â””â”€â”€ ObjectFactory.java
    â”‚Â Â  â”‚Â Â              â””â”€â”€ service
    â”‚Â Â  â”‚Â Â                  â”œâ”€â”€ IMessageService.java
    â”‚Â Â  â”‚Â Â                  â””â”€â”€ impl
    â”‚Â Â  â”‚Â Â                      â”œâ”€â”€ QQMessageServiceImpl.java
    â”‚Â Â  â”‚Â Â                      â””â”€â”€ WechatMessageServiceImpl.java
    â”‚Â Â  â””â”€â”€ resources
    â”‚Â Â      â””â”€â”€ application.properties
    â””â”€â”€ test
        â””â”€â”€ java
```

### 1.æ¶ˆæ¯æœåŠ¡æ¥å£

â€‹	ç›®æ ‡ä¸æ˜¯å†™å¾ˆå¤æ‚çš„æ¥å£ï¼Œå› æ­¤ä¸€åˆ‡ä»ç®€ï¼Œå°±åªæ˜¯ä¸€ä¸ªæ‰“å°æ¥æ”¶åˆ°çš„ä¿¡æ¯çš„æ¥å£å°±è¡Œå•¦

```java
package i.love.wsq.service;

public interface IMessageService {
    public void echo(String message);
}
```



### 2.æ¶ˆæ¯æœåŠ¡å®ç°

â€‹	ä¸ºäº†æ¼”ç¤ºå¤šæ€ï¼Œæˆ‘ä»¬å†™ä¸¤ä¸ªå®ç°ç±»ï¼ŒQQæ¶ˆæ¯å’Œå¾®ä¿¡æ¶ˆæ¯

```java
package i.love.wsq.service.impl;

import i.love.wsq.service.IMessageService;

public class QQMessageServiceImpl implements IMessageService {
    @Override
    public void echo(String message) {
        System.out.println("ã€QQæœåŠ¡ã€‘" + message);
    }
}
```

```java
package i.love.wsq.service.impl;

import i.love.wsq.service.IMessageService;

public class WechatMessageServiceImpl implements IMessageService {
    @Override
    public void echo(String message) {
        System.out.println("ã€å¾®ä¿¡æœåŠ¡ã€‘" + message);
    }
}
```



### 3.æµ‹è¯•ç±»

â€‹	æµ‹è¯•ç±»å°±å¯ä»¥ç†è§£ä¸ºå®¢æˆ·ç«¯äº†ï¼Œä¸ºäº†ç®€å•æˆ‘ä»¬ç›´æ¥æŠŠMainå½“æµ‹è¯•ç±»ï¼Œä¸å•ç‹¬å†™æµ‹è¯•äº†

```java
package i.love.wsq;

import i.love.wsq.service.IMessageService;
import i.love.wsq.service.impl.QQMessageServiceImpl;

public class Main {
    public static void main(String[] args) {
        IMessageService messageService = new QQMessageServiceImpl();
        messageService.echo("çµæ„Ÿè‡ğŸ§ğŸŒ¹");
    }
}
```

â€‹	ç°åœ¨æˆ‘ä»¬å¯ä»¥å¼€å§‹åˆ†æè¿™ä¸ªæµ‹è¯•ç±»äº†ã€‚

â€‹	å®ƒä½¿ç”¨äº†å…³é”®å­—newç›´æ¥å®ä¾‹åŒ–äº†`QQMessageServiceImpl`å­ç±»ï¼Œè¿™å°±æ˜¯è€¦åˆäº†å­ç±»ã€‚





## 3.åå°„å·¥å‚

â€‹	æˆ‘ä»¬æƒ³è¦å¯ä»¥åŠ¨æ€åœ°å®ä¾‹åŒ–æ¥å£çš„å®ç°å­ç±»ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨å·¥å‚è®¾è®¡æ¨¡å¼ï¼ŒæŠŠå®ä¾‹åŒ–çš„è¿‡ç¨‹å°è£…ã€‚

â€‹	1ã€å¹¶ä¸”ä¸ºäº†èƒ½å®ç°å„ç§æ¥å£çš„è·å–ï¼Œæˆ‘ä»¬ä¸å¦¨è®¾è®¡ä¸ºæ³›å‹å·¥å‚

```java
package i.love.wsq.factory;

public class ObjectFactory {
    private ObjectFactory() {}
    
    public static <T> T getInstance(String className, Class<T> returnType) {
        Object instance =  null;
        // è·å–Classå¯¹è±¡å®ä¾‹
        try {
            Class<?> clazz = Class.forName(className);
            instance = clazz.getConstructor().newInstance();
        } catch (Exception e) {
            throw new RuntimeException("å®ä¾‹åŒ–å¯¹è±¡å¤±è´¥");
        }
        return (T) instance;
    }
}
```

â€‹	2ã€ä¿®æ”¹æµ‹è¯•ç±»

```java
public class Main {
    public static void main(String[] args) {
        IMessageService messageService = ObjectFactory.getInstance("i.love.wsq.service.impl.QQMessageServiceImpl", IMessageService.class);
        messageService.echo("çµæ„Ÿè‡ğŸ§ğŸŒ¹");
    }
}
```

â€‹	å¯ä»¥å‘ç°ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»ä¸éœ€è¦åœ¨ä»£ç ä¸­æ˜ç¡®æŒ‡å®šå®ç°ç±»çš„ç±»å‹äº†ï¼Œè€Œæ˜¯é€šè¿‡å­—ç¬¦ä¸²å»å®ç°ï¼Œè¿™æ ·æµ‹è¯•ç±»ä¹…ä¸å†ä¸æŸä¸€å®ç°å­ç±»è€¦åˆï¼Œå¯ä»¥éšæ„ä½¿ç”¨ä»»æ„çš„å®ç°å­ç±»äº†ã€‚



## 4.é…ç½®æ–‡ä»¶

â€‹	é¦–å…ˆåœ¨resourceä¸­å®šä¹‰é…ç½®æ–‡ä»¶

```properties
QQMessageService=i.love.wsq.service.impl.QQMessageServiceImpl
WechatMessageService=i.love.wsq.service.impl.WechatMessageServiceImpl
```

â€‹	åœ¨æµ‹è¯•ç±»ä¸­æ‰‹å†™å­—ç¬¦ä¸²æŒ‡å®šå®ç°å­ç±»å…¶å®è¿˜æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘ä»¬ä¸å¦¨ä½¿ç”¨é…ç½®ç±»`properties`æ¥è§£å†³æ‰

```java
package i.love.wsq;

import i.love.wsq.factory.ObjectFactory;
import i.love.wsq.service.IMessageService;
import java.io.IOException;
import java.util.Properties;

public class Main {
    public static void main(String[] args) throws IOException {
        Properties properties = new Properties();
      	// è¿™é‡Œä½¿ç”¨çš„æ˜¯åŸç”Ÿjavaï¼Œæ‰€ä»¥ä»resourceåŠ è½½éœ€è¦ç”¨æŒ‡å®šçš„æ–¹æ³•
        properties.load(Main.class.getResourceAsStream("/application.properties"));
        IMessageService messageService = ObjectFactory.getInstance(properties.getProperty("QQMessageService"), IMessageService.class);
        messageService.echo("çµæ„Ÿè‡ğŸ§ğŸŒ¹");
    }
}
```



## 5.Beanæ¨¡å¼ç®¡ç†

â€‹	ç°åœ¨æˆ‘ä»¬åˆ°äº†æœ€åä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæœ‰å¤šä¸ªç”¨æˆ·ï¼ˆå¤šä¸ªçº¿ç¨‹ï¼‰è°ƒç”¨ç³»ç»Ÿçš„æ¥å£ï¼Œç³»ç»Ÿä¼šå®ä¾‹åŒ–å‡ºå¤šä¸ªå®ç°å­ç±»ã€‚è¿™é‡Œä¸å¦¨æˆ‘ä»¬ç”¨å¤šçº¿ç¨‹æ¥æ¨¡æ‹Ÿè¿™ä¸ªæƒ…å†µï¼š

```java
package i.love.wsq;

import i.love.wsq.factory.ObjectFactory;
import i.love.wsq.service.IMessageService;
import java.io.IOException;
import java.util.Properties;

public class Main {
    public static void main(String[] args) throws IOException {
        Properties properties = new Properties();
        properties.load(Main.class.getResourceAsStream("/application.properties"));

        for (int i = 0; i < 10; i ++ ) {
            int finalI = i;
            Thread thread = new Thread(new Runnable() {
                @Override
                public void run() {
                    IMessageService messageService = ObjectFactory.getInstance(properties.getProperty(finalI % 2 == 0 ? "QQMessageService" : "WechatMessageService"), IMessageService.class);
                    messageService.echo(Thread.currentThread() + " " + messageService.toString() + " " + (finalI % 2 == 0 ? "çµæ„Ÿè‡ğŸ§ğŸŒ¹" : "å…”åˆ€ä¹ğŸ§ğŸŒ¹"));
                }
            });
            thread.start();
        }
    }
}
```



â€‹	è¿è¡Œåç»“æœä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸€ä¸ªçº¿ç¨‹çš„å®ç°å­ç±»éƒ½æ˜¯ä¸åŒå®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´ç³»ç»Ÿåˆ›å»ºäº†åä¸ªå¯¹è±¡ï¼Œè¿™æ˜¾ç„¶å¸¦æ¥äº†æ€§èƒ½é—®é¢˜ã€‚

>ã€QQæœåŠ¡ã€‘Thread[Thread-2,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6e268567 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-7,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@2a3c142c å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-0,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6fa76e7 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-3,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@1789e283 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-9,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@234c0f50 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-1,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@d156cd4 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-8,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@3936576e çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-5,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@51cb8d13 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-4,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@26049099 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-6,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@f3f9f4b çµæ„Ÿè‡ğŸ§ğŸŒ¹



â€‹	è§£å†³çš„æ–¹æ¡ˆæ˜¯æˆ‘ä»¬æ”¹è¿›æˆ‘ä»¬çš„å·¥å‚ï¼Œåœ¨jvmåˆå§‹åŒ–æ—¶ç›´æ¥åŠ è½½æ‰€æœ‰ä¼šç”¨åˆ°çš„å®ç°ç±»ï¼Œå¹¶å­˜æ”¾åˆ°ä¸€ä¸ªMapé‡Œã€‚å½“æµ‹è¯•ç±»ï¼ˆå®¢æˆ·ç«¯ï¼‰æƒ³è¦è·å¾—æŸä¸€ä¸ªå®ç°ç±»çš„æ—¶å€™ï¼Œæˆ‘ä»¬ç›´æ¥ä»Mapä¸­æ‰¾åˆ°é‚£ä¸ªç±»è¿”å›ç»™å®ƒï¼Œæ•´ä¸ªç³»ç»Ÿä»å§‹è‡³ç»ˆæ¯ä¸ªå®ç°ç±»éƒ½åªæœ‰å”¯ä¸€ä¸€ä¸ªã€‚

```java
package i.love.wsq.factory;

import i.love.wsq.Main;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import java.util.Properties;

public class ObjectFactory {
    //ä¸šåŠ¡æ¥å£å®ä¾‹æ± 
    private static final Map<String, Object> INSTANCE_POOL_MAP = new HashMap<>();
    // staticä»£ç å—åšåˆå§‹åŒ–
    static {
        Properties properties = new Properties();
        try {
            properties.load(Main.class.getResourceAsStream("/application.properties"));
        } catch (IOException e) {
            throw new RuntimeException("åˆå§‹åŒ–é…ç½®å¤±è´¥");
        }
        //åŠ è½½é…ç½®ç±»ä¸­å†™æ˜çš„å®ç°ç±»
        for (Map.Entry<Object, Object> entry: properties.entrySet()) {
            String beanName = entry.getKey().toString();
            try {
                Class<?> clazz = Class.forName(entry.getValue().toString());
                Object instance = clazz.getConstructor().newInstance();
                INSTANCE_POOL_MAP.put(beanName, instance);
            } catch (Exception e) {
                throw new RuntimeException("å®ç°ç±»çš„å®ä¾‹åŒ–å¤±è´¥");
            }
        }
    }

    // ç§æœ‰åŒ–æ„é€ æ–¹æ³•
    private ObjectFactory() {}
    
    public static <T> T getInstance(String className, Class<T> returnType) {
        return (T) INSTANCE_POOL_MAP.get(className);
    }
}

```



â€‹	æ¥ä¸‹æ¥æˆ‘ä»¬å¾®è°ƒä¸‹æµ‹è¯•ç±»ï¼ŒæŠŠåŠ è½½é…ç½®ç±»çš„åœ°æ–¹å»æ‰

```java
package i.love.wsq;

import i.love.wsq.factory.ObjectFactory;
import i.love.wsq.service.IMessageService;
import java.io.IOException;

public class Main {
    public static void main(String[] args) throws IOException {
        for (int i = 0; i < 10; i ++ ) {
            int finalI = i;
            Thread thread = new Thread(new Runnable() {
                @Override
                public void run() {
                    IMessageService messageService = ObjectFactory.getInstance(finalI % 2 == 0 ? "QQMessageService" : "WechatMessageService", IMessageService.class);
                    messageService.echo(Thread.currentThread() + " " + messageService.toString() + " " + (finalI % 2 == 0 ? "çµæ„Ÿè‡ğŸ§ğŸŒ¹" : "å…”åˆ€ä¹ğŸ§ğŸŒ¹"));
                }
            });
            thread.start();
        }
    }
}
```

â€‹	è¿™æ¬¡æˆ‘ä»¬çœ‹åˆ°ç»“æœï¼Œæ˜¾ç„¶ç³»ç»Ÿä¸­ä¸€å…±å°±ä¸¤ä¸ªå®ç°ç±»ï¼Œæ²¡æœ‰å†é‡å¤åœ°å®ä¾‹åŒ–å®ç°ç±»äº†

>ã€QQæœåŠ¡ã€‘Thread[Thread-0,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6dc05ce3 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-6,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6dc05ce3 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-8,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6dc05ce3 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-3,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@7f1b8298 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-7,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@7f1b8298 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-9,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@7f1b8298 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-1,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@7f1b8298 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€å¾®ä¿¡æœåŠ¡ã€‘Thread[Thread-5,5,main] i.love.wsq.service.impl.WechatMessageServiceImpl@7f1b8298 å…”åˆ€ä¹ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-4,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6dc05ce3 çµæ„Ÿè‡ğŸ§ğŸŒ¹
>ã€QQæœåŠ¡ã€‘Thread[Thread-2,5,main] i.love.wsq.service.impl.QQMessageServiceImpl@6dc05ce3 çµæ„Ÿè‡ğŸ§ğŸŒ¹

â€‹	

â€‹	åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°±å®ç°äº†æ‰€è°“çš„æ§åˆ¶åè½¬æ¨¡å¼ï¼Œå³å®ä¾‹åŒ–ç”±ç³»ç»Ÿï¼ˆæ¡†æ¶ï¼‰å®ç°ï¼Œè€Œä½¿ç”¨è€…



